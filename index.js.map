{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48862987-6323d91c4dec4b8453f0076b5';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\nexport function renderImages(images, isAppend = false) {\n    const markup = images\n    .map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${image.likes}</p>\n                <p><strong>Views:</strong> ${image.views}</p>\n                <p><strong>Comments:</strong> ${image.comments}</p>\n                <p><strong>Downloads:</strong> ${image.downloads}</p>\n            </div>\n        </a>\n        \n    `).join('');\n\n    if (isAppend) {\n        gallery.insertAdjacentHTML('beforeend', markup);\n      } else {\n        gallery.innerHTML = markup;\n      }\n    \n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a');\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function smoothScroll() {\n    // Отримуємо висоту першої картки галереї\n    const firstCard = gallery.firstElementChild;\n    if (firstCard) {\n      const { height } = firstCard.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  }","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, smoothScroll } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Посилання на елементи\nconst refs = {\n    formElem: document.querySelector('#search-form'),\n    galleryElem: document.querySelector('.gallery'),\n    targetElem: document.querySelector('.js-target'),\n    loaderElem: document.querySelector('.loader'),\n};\n\n\n// Параметри запиту\nconst params = {\n  query: '',\n  page: 1,\n  perPage: 40,\n  totalHits: 0,\n};\n\n// Обробка сабміту форми\nrefs.formElem.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const queryInput = e.target.elements.searchQuery;\n  const query = queryInput.value.trim();\n\n  if (!query) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search term!' });\n    return;\n  }\n\n  // Скидаємо значення для нового запиту\n  params.query = query;\n  params.page = 1;\n\n  clearGallery();\n \n  showLoader();\n\n  try {\n    const data = await fetchImages(params.query, params.page, params.perPage);\n    params.totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'No results',\n        message: 'No images found. Try again!',\n      });\n    } else {\n      renderImages(data.hits);\n      updateObserver();\n    }\n      \n    \n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later.' });\n  } finally {\n    hideLoader();\n  }\n\n  // Очистка поля форми \n  queryInput.value = '';\n});\n\nasync function loadMore() {\n    params.page += 1;\n    showLoader();\n\n\n  try {\n    const data = await fetchImages(params.query, params.page, params.perPage);\n    renderImages(data.hits, true);\n    smoothScroll();\n    updateObserver();\n     \n} catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong.' });\n} finally {\n    hideLoader();\n}\n}\n\nconst observer = new IntersectionObserver(entries => {\nif (entries[0].isIntersecting) {\n    loadMore();\n}\n}, { rootMargin: '100px' });\n\nfunction updateObserver() {\nif (params.page * params.perPage < params.totalHits) {\n    observer.observe(refs.targetElem);\n} else {\n    observer.unobserve(refs.targetElem);\n    iziToast.info({ title: 'End', message: \"We're sorry, but you've reached the end of search results.\" });\n}\n}\n\nfunction showLoader() {\nrefs.loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\nrefs.loaderElem.style.display = 'none';\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","lightbox","renderImages","images","isAppend","markup","image","SimpleLightbox","clearGallery","smoothScroll","firstCard","height","refs","params","e","queryInput","iziToast","showLoader","data","updateObserver","hideLoader","loadMore","observer","entries"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACb,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCpBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAEG,SAASC,EAAaC,EAAQC,EAAW,GAAO,CACnD,MAAMC,EAASF,EACd,IAAIG,GAAS;AAAA,mBACCA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,6CAEjBA,EAAM,KAAK;AAAA,6CACXA,EAAM,KAAK;AAAA,gDACRA,EAAM,QAAQ;AAAA,iDACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAI3D,EAAE,KAAK,EAAE,EAENF,EACAJ,EAAQ,mBAAmB,YAAaK,CAAM,EAE9CL,EAAQ,UAAYK,EAGnBJ,EAGDA,EAAS,QAAO,EAFhBA,EAAW,IAAIM,EAAe,YAAY,CAIlD,CAEO,SAASC,GAAe,CAC3BR,EAAQ,UAAY,EACxB,CAEO,SAASS,GAAe,CAE3B,MAAMC,EAAYV,EAAQ,kBAC1B,GAAIU,EAAW,CACb,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAU,sBAAqB,EAClD,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAClB,CAAO,CACF,CACL,CC1CA,MAAMC,EAAO,CACT,SAAU,SAAS,cAAc,cAAc,EAC/C,YAAa,SAAS,cAAc,UAAU,EAC9C,WAAY,SAAS,cAAc,YAAY,EAC/C,WAAY,SAAS,cAAc,SAAS,CAChD,EAIMC,EAAS,CACb,MAAO,GACP,KAAM,EACN,QAAS,GACT,UAAW,CACb,EAGAD,EAAK,SAAS,iBAAiB,SAAU,MAAME,GAAK,CAClDA,EAAE,eAAc,EAEhB,MAAMC,EAAaD,EAAE,OAAO,SAAS,YAC/BnB,EAAQoB,EAAW,MAAM,KAAI,EAEnC,GAAI,CAACpB,EAAO,CACVqB,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,6BAA6B,CAAE,EACzE,MACD,CAGDH,EAAO,MAAQlB,EACfkB,EAAO,KAAO,EAEdL,IAEAS,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMxB,EAAYmB,EAAO,MAAOA,EAAO,KAAMA,EAAO,OAAO,EACxEA,EAAO,UAAYK,EAAK,UAEpBA,EAAK,KAAK,SAAW,EACvBF,EAAS,QAAQ,CACf,MAAO,aACP,QAAS,6BACjB,CAAO,GAEDd,EAAagB,EAAK,IAAI,EACtBC,IAIH,MAAe,CACdH,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,+CAA+C,CAAE,CAC/F,QAAY,CACRI,GACD,CAGDL,EAAW,MAAQ,EACrB,CAAC,EAED,eAAeM,GAAW,CACtBR,EAAO,MAAQ,EACfI,IAGF,GAAI,CACF,MAAMC,EAAO,MAAMxB,EAAYmB,EAAO,MAAOA,EAAO,KAAMA,EAAO,OAAO,EACxEX,EAAagB,EAAK,KAAM,EAAI,EAC5BT,IACAU,GAEJ,MAAgB,CACZH,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,uBAAuB,CAAE,CACvE,QAAU,CACNI,GACJ,CACA,CAEA,MAAME,EAAW,IAAI,qBAAqBC,GAAW,CACjDA,EAAQ,CAAC,EAAE,gBACXF,GAEJ,EAAG,CAAE,WAAY,OAAO,CAAE,EAE1B,SAASF,GAAiB,CACtBN,EAAO,KAAOA,EAAO,QAAUA,EAAO,UACtCS,EAAS,QAAQV,EAAK,UAAU,GAEhCU,EAAS,UAAUV,EAAK,UAAU,EAClCI,EAAS,KAAK,CAAE,MAAO,MAAO,QAAS,4DAA4D,CAAE,EAEzG,CAEA,SAASC,GAAa,CACtBL,EAAK,WAAW,MAAM,QAAU,OAChC,CAEA,SAASQ,GAAa,CACtBR,EAAK,WAAW,MAAM,QAAU,MAChC"}